<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞–∑–∏–Ω–æ —Å –∫—É–±–∏–∫–∞–º–∏</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #2e003e;
      color: white;
    }

    .balance {
      margin: 20px;
      font-size: 24px;
    }

    input[type="number"] {
      padding: 8px;
      font-size: 16px;
      width: 100px;
      margin-right: 10px;
      border-radius: 5px;
      border: none;
      background-color: #4a005c;
      color: white;
      text-align: center;
    }

    .suggested-bets,
    .subtract-bets {
      margin: 10px 0;
    }

    .suggested-bets button,
    .subtract-bets button {
      margin: 0 5px;
      background-color: #7b1fa2;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .subtract-bets button {
      background-color: #d32f2f;
    }

    button.spin-button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #9c27b0;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .result {
      margin-top: 20px;
      font-size: 20px;
    }

    .wheel-container {
      position: relative;
      width: 300px;
      height: 300px;
      margin: 50px auto;
      border: 5px solid #ffffffcc;
      border-radius: 50%;
      overflow: hidden;
    }

    .arrow {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      width: 0; 
      height: 0; 
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 30px solid red;
      z-index: 10;
    }

    .wheel {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      transform-origin: center;
      transition: transform 3s ease-out;
    }

    .dice {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      line-height: 60px;
      font-size: 24px;
      background-color: #9c27b0;
      color: white;
      border-radius: 10px;
      text-align: center;
      user-select: none;
      pointer-events: auto;
    }

    .dice.selected {
      background-color: #e040fb;
    }

    .last-results {
      margin-top: 20px;
      font-size: 18px;
    }

    .last-results span {
      display: inline-block;
      width: 40px;
      height: 40px;
      line-height: 40px;
      margin: 0 5px;
      background-color: #4a005c;
      border-radius: 50%;
      font-weight: bold;
    }
  </style>
</head>
<body>

<div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">1000</span></div>

<input type="number" id="betAmount" placeholder="–°—Ç–∞–≤–∫–∞" min="1" max="10000"/>
<div class="suggested-bets">
  <button onclick="addToBet(10)">+10</button>
  <button onclick="addToBet(50)">+50</button>
  <button onclick="addToBet(100)">+100</button>
  <button onclick="addToBet(500)">+500</button>
</div>
<div class="subtract-bets">
  <button onclick="subtractFromBet(10)">‚àí10</button>
  <button onclick="subtractFromBet(50)">‚àí50</button>
  <button onclick="subtractFromBet(100)">‚àí100</button>
  <button onclick="subtractFromBet(500)">‚àí500</button>
</div>
<button class="spin-button" onclick="spinWheel()">–ö—Ä—É—Ç–∏—Ç—å!</button>

<div class="result" id="result"></div>

<div class="wheel-container">
  <div class="arrow"></div>
  <div class="wheel" id="wheel"></div>
</div>

<!-- –ë–ª–æ–∫ –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
<div class="last-results">
  –ü–æ—Å–ª–µ–¥–Ω–∏–µ –≤—ã–ø–∞–≤—à–∏–µ —á–∏—Å–ª–∞:
  <div id="lastResults"></div>
</div>

<script>
  const diceValues = [1, 2, 3, 4, 5, 6];
  let balance = 1000;
  let selectedDice = null;
  const wheel = document.getElementById("wheel");
  const radius = 120;
  const centerX = 150;
  const centerY = 150;

  // –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤—ã–ø–∞–¥–µ–Ω–∏–π
  const lastResults = [];

  function createDiceElements() {
    for (let i = 0; i < diceValues.length; i++) {
      const angle = (i / diceValues.length) * 2 * Math.PI;
      const x = centerX + radius * Math.cos(angle);
      const y = centerY + radius * Math.sin(angle);

      const div = document.createElement("div");
      div.className = "dice";
      div.style.left = `${x}px`;
      div.style.top = `${y}px`;
      div.textContent = diceValues[i];
      div.dataset.value = diceValues[i];

      // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º —É–≥–æ–ª –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è
      div.dataset.angle = (-angle * 180 / Math.PI); // –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–π

      div.onclick = () => {
        document.querySelectorAll(".dice").forEach(d => d.classList.remove("selected"));
        div.classList.add("selected");
        selectedDice = parseInt(div.dataset.value);
      };

      wheel.appendChild(div);
    }
  }

  createDiceElements();

  function fixDiceRotation() {
    const dices = document.querySelectorAll(".dice");
    dices.forEach(dice => {
      const correctAngle = parseFloat(dice.dataset.angle);
      dice.style.transform = `translate(-50%, -50%) rotate(${correctAngle}deg)`;
    });
  }

  function updateLastResults(value) {
    const container = document.getElementById("lastResults");

    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    lastResults.unshift(value);

    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ 5 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö
    if (lastResults.length > 5) {
      lastResults.pop();
    }

    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º
    container.innerHTML = '';
    lastResults.forEach(num => {
      const span = document.createElement('span');
      span.textContent = num;
      container.appendChild(span);
    });
  }

  // –î–æ–±–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫ —Å—Ç–∞–≤–∫–µ
  function addToBet(amount) {
    const betInput = document.getElementById("betAmount");
    let current = parseInt(betInput.value) || 0;
    current += amount;
    betInput.value = current;
  }

  // –í—ã—á–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å—Ç–∞–≤–∫–∏
  function subtractFromBet(amount) {
    const betInput = document.getElementById("betAmount");
    let current = parseInt(betInput.value) || 0;
    current = Math.max(current - amount, 0); // –Ω–µ –º–µ–Ω—å—à–µ 0
    betInput.value = current;
  }

  function spinWheel() {
    const betInput = document.getElementById("betAmount");
    const bet = parseInt(betInput.value);
    const resultDiv = document.getElementById("result");

    if (selectedDice === null) {
      resultDiv.textContent = "–í—ã–±–µ—Ä–∏—Ç–µ —á–∏—Å–ª–æ –¥–ª—è —Å—Ç–∞–≤–∫–∏!";
      return;
    }

    if (isNaN(bet) || bet <= 0) {
      resultDiv.textContent = "–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç–∞–≤–∫—É!";
      return;
    }

    if (bet > balance) {
      resultDiv.textContent = "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!";
      return;
    }

    // –°–ª—É—á–∞–π–Ω–æ–µ –≤—ã–ø–∞–¥–µ–Ω–∏–µ
    const resultValue = diceValues[Math.floor(Math.random() * diceValues.length)];
    const index = diceValues.indexOf(resultValue);

    // –í—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–µ—Å–∞
    const offset = 360 * 5 + ((index / diceValues.length) * 360);
    wheel.style.transform = `rotate(${offset}deg)`;

    setTimeout(() => {
      if (resultValue === selectedDice) {
        const win = bet * 5;
        balance += win - bet;
        resultDiv.textContent = `–í—ã–ø–∞–ª–æ: ${resultValue}. –ü–æ–±–µ–¥–∞! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏: ${win} üí∞`;
      } else {
        balance -= bet;
        resultDiv.textContent = `–í—ã–ø–∞–ª–æ: ${resultValue}. –ù–µ —É–≥–∞–¥–∞–ª–∏ üò¢`;
      }

      document.getElementById("balance").textContent = balance;
      selectedDice = null;
      document.querySelectorAll(".dice").forEach(d => d.classList.remove("selected"));
      betInput.value = "";

      // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Å—Ç–æ—Ä–∏—é –≤—ã–ø–∞–¥–µ–Ω–∏–π
      updateLastResults(resultValue);

      // –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–≤–æ—Ä–æ—Ç –∫—É–±–∏–∫–æ–≤
      fixDiceRotation();
    }, 3000);
  }
</script>

</body>
</html>
