<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Простое Казино</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #app {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 90%;
            max-width: 500px;
        }

        .form-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .balance {
            font-size: 1.2em;
            margin: 15px 0;
            padding: 10px;
            background-color: #f8f8f8;
            border-radius: 5px;
        }

        .game {
            margin-top: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }

        .logout-btn {
            margin-top: 20px;
            background-color: #f44336;
        }

        .logout-btn:hover {
            background-color: #d32f2f;
        }

        #dice-result {
            margin-top: 15px;
            font-size: 1.2em;
            min-height: 30px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div id="auth-forms">
            <div class="form-container" id="login-form">
                <h2>Вход</h2>
                <input type="text" id="login-username" placeholder="Имя пользователя">
                <input type="password" id="login-password" placeholder="Пароль">
                <button onclick="login()">Войти</button>
                <p>Нет аккаунта? <a href="#" onclick="showRegister()">Зарегистрируйтесь</a></p>
            </div>

            <div class="form-container" id="register-form" style="display: none;">
                <h2>Регистрация</h2>
                <input type="text" id="register-username" placeholder="Имя пользователя">
                <input type="password" id="register-password" placeholder="Пароль">
                <input type="number" id="register-start-balance" placeholder="Начальный баланс" value="1000">
                <button onclick="register()">Зарегистрироваться</button>
                <p>Уже есть аккаунт? <a href="#" onclick="showLogin()">Войдите</a></p>
            </div>
        </div>

        <div id="casino" style="display: none;">
            <h1>Добро пожаловать, <span id="username-display"></span>!</h1>
            <div class="balance">Баланс: $<span id="balance">0</span></div>
            
            <div class="game">
                <h2>Игра в кости</h2>
                <p>Ставка: <input type="number" id="bet-amount" min="1" value="10"></p>
                <p>Выберите число (1-6): <input type="number" id="player-number" min="1" max="6" value="3"></p>
                <button onclick="playDice()">Играть</button>
                <div id="dice-result"></div>
            </div>
            
            <button onclick="logout()" class="logout-btn">Выйти</button>
        </div>
    </div>

    <script>
        // Хранилище пользователей
        let users = JSON.parse(localStorage.getItem('casinoUsers')) || {};
        let currentUser = null;

        // Показать форму регистрации
        function showRegister() {
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('register-form').style.display = 'block';
        }

        // Показать форму входа
        function showLogin() {
            document.getElementById('register-form').style.display = 'none';
            document.getElementById('login-form').style.display = 'block';
        }

        // Регистрация нового пользователя
        function register() {
            const username = document.getElementById('register-username').value.trim();
            const password = document.getElementById('register-password').value;
            const balance = parseInt(document.getElementById('register-start-balance').value) || 1000;

            if (!username || !password) {
                alert('Введите имя пользователя и пароль');
                return;
            }

            if (users[username]) {
                alert('Пользователь с таким именем уже существует');
                return;
            }

            users[username] = {
                password: password,
                balance: balance
            };

            localStorage.setItem('casinoUsers', JSON.stringify(users));
            alert('Регистрация успешна! Теперь вы можете войти.');
            showLogin();
        }

        // Вход пользователя
        function login() {
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value;

            if (!users[username] || users[username].password !== password) {
                alert('Неверное имя пользователя или пароль');
                return;
            }

            currentUser = username;
            document.getElementById('auth-forms').style.display = 'none';
            document.getElementById('casino').style.display = 'block';
            updateUserInfo();
        }

        // Обновление информации о пользователе
        function updateUserInfo() {
            document.getElementById('username-display').textContent = currentUser;
            document.getElementById('balance').textContent = users[currentUser].balance;
        }

        // Выход пользователя
        function logout() {
            currentUser = null;
            document.getElementById('casino').style.display = 'none';
            document.getElementById('auth-forms').style.display = 'block';
            showLogin();
        }

        // Игра в кости
        function playDice() {
            if (!currentUser) return;

            const bet = parseInt(document.getElementById('bet-amount').value);
            const playerNumber = parseInt(document.getElementById('player-number').value);
            const user = users[currentUser];

            if (isNaN(bet) || bet < 1) {
                alert('Введите корректную ставку');
                return;
            }

            if (bet > user.balance) {
                alert('Недостаточно средств');
                return;
            }

            if (isNaN(playerNumber) || playerNumber < 1 || playerNumber > 6) {
                alert('Выберите число от 1 до 6');
                return;
            }

            // Генерация случайного числа (1-6)
            const diceRoll = Math.floor(Math.random() * 6) + 1;
            const resultElement = document.getElementById('dice-result');

            if (diceRoll === playerNumber) {
                const winAmount = bet * 5; // Выигрыш 5x ставки
                user.balance += winAmount;
                resultElement.innerHTML = `Выпало: ${diceRoll}. Вы угадали и выиграли $${winAmount}!`;
            } else {
                user.balance -= bet;
                resultElement.innerHTML = `Выпало: ${diceRoll}. Вы не угадали и потеряли $${bet}.`;
            }

            // Сохраняем обновленный баланс
            localStorage.setItem('casinoUsers', JSON.stringify(users));
            updateUserInfo();
        }

        // Проверяем, есть ли активный пользователь при загрузке страницы
        window.onload = function() {
            // В реальном приложении здесь была бы проверка сессии/токена
            showLogin();
        };
    </script>
</body>
</html>
